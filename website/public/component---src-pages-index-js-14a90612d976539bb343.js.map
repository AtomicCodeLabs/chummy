{"version":3,"sources":["webpack:///./src/utils/auth.jsx","webpack:///./src/components/Status/index.js","webpack:///./src/pages/index.js","webpack:///./node_modules/gatsby-plugin-firebase/index.js"],"names":["isBrowser","window","getUser","localStorage","getItem","JSON","parse","setUser","user","setItem","stringify","isLoggedIn","email","logout","firebase","Promise","resolve","auth","signOut","then","details","useState","setFirebase","useFirebase","fb","displayName","className","href","onClick","event","preventDefault","navigate","to","Index","title","type","exports","FirebaseContext","require","default"],"mappings":"2FAAA,wIAAO,IAAMA,EAAY,iBAAwB,oBAAXC,QAEzBC,EAAU,kBACrBF,KAAeC,OAAOE,aAAaC,QAAQ,QACvCC,KAAKC,MAAML,OAAOE,aAAaC,QAAQ,SACvC,IAEOG,EAAU,SAACC,GAAD,OACrBR,KAAeC,OAAOE,aAAaM,QAAQ,OAAQJ,KAAKK,UAAUF,KAEvDG,EAAa,WAExB,QADaT,IACCU,OAGHC,EAAS,SAACC,GACrB,OAAO,IAAIC,SAAQ,SAACC,GAClBF,EACGG,OACAC,UACAC,MAAK,WACJZ,EAAQ,IACRS,Y,kCCtBR,6DAMe,eAAO,IAOhBI,EAPe,EACaC,qBAAzBP,EADY,KACFQ,EADE,KAQnB,GALAC,uBAAY,SAACC,GACXF,EAAYE,KACX,IAGEb,cAQE,CAAC,IAAD,EAC0BT,cAAvBuB,EADH,EACGA,YAAab,EADhB,EACgBA,MACrBQ,EACE,uBAAGM,UAAU,mBAAb,gBACgBD,EADhB,KAC+Bb,EAD/B,SAIE,uBACEe,KAAK,IACLC,QAAS,SAACC,GACRA,EAAMC,iBACNjB,YAAOC,GAAUK,MAAK,kBAAMY,mBAAS,mBAGvC,6CArBNX,EACE,uBAAGM,UAAU,mBACX,kBAAC,OAAD,CAAMM,GAAG,cACP,uCAwBR,OAAO,6BAAMZ,K,kCC1Cf,gFAkDea,UA5CD,kBACZ,kBAAC,IAAD,KACE,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAMC,MAAM,mCACV,0GAEU,kDAFV,cAE+C,uCAF/C,gCAKA,6BACA,8DAGE,uBACER,UAAU,0BACVC,KAAK,6EAFP,8BAHF,gBAUE,uBACED,UAAU,0BACVC,KAAK,6DAFP,0CAVF,4CAmBA,6BACA,+FAEE,6BACA,4BACED,UAAU,2HACVS,KAAK,UAEL,kBAAC,IAAD,CAAMH,GAAG,gBAAT,4B,qBC3CVI,EAAQC,gBAAkBC,EAAQ,QAAoCC,QACtEH,EAAQb,YAAce,EAAQ,QAAoCf","file":"component---src-pages-index-js-14a90612d976539bb343.js","sourcesContent":["export const isBrowser = () => typeof window !== 'undefined';\n\nexport const getUser = () =>\n  isBrowser() && window.localStorage.getItem('user')\n    ? JSON.parse(window.localStorage.getItem('user'))\n    : {};\n\nexport const setUser = (user) =>\n  isBrowser() && window.localStorage.setItem('user', JSON.stringify(user));\n\nexport const isLoggedIn = () => {\n  const user = getUser();\n  return !!user.email;\n};\n\nexport const logout = (firebase) => {\n  return new Promise((resolve) => {\n    firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        setUser({});\n        resolve();\n      });\n  });\n};\n","import React, { useState } from 'react';\n\nimport { Link, navigate } from '@reach/router';\nimport { useFirebase } from 'gatsby-plugin-firebase';\nimport { getUser, isLoggedIn, logout } from '../../utils/auth';\n\nexport default () => {\n  const [firebase, setFirebase] = useState();\n\n  useFirebase((fb) => {\n    setFirebase(fb);\n  }, []);\n\n  let details;\n  if (!isLoggedIn()) {\n    details = (\n      <p className=\"text-right px-5\">\n        <Link to=\"/app/login\">\n          <u>Log in</u>\n        </Link>\n      </p>\n    );\n  } else {\n    const { displayName, email } = getUser();\n    details = (\n      <p className=\"text-right px-5\">\n        Logged in as {displayName} ({email}\n        )!\n        {` `}\n        <a\n          href=\"/\"\n          onClick={(event) => {\n            event.preventDefault();\n            logout(firebase).then(() => navigate(`/app/login`));\n          }}\n        >\n          <u>log out</u>\n        </a>\n      </p>\n    );\n  }\n\n  return <div>{details}</div>;\n};\n","import React from 'react';\nimport { Link } from 'gatsby';\nimport Layout from '../components/Layout';\nimport View from '../components/View';\nimport Status from '../components/Status';\n\nconst Index = () => (\n  <Layout>\n    <Status />\n    <View title=\"Firebase Authentication Starter\">\n      <p>\n        ðŸ‘‹ This is a simple demo of creating dynamic pages with Gatsby that\n        require <b>user authentication</b> and using <b>Firebase</b> as\n        authentication provider.\n      </p>\n      <br />\n      <p>\n        ðŸ“š It uses concepts from the\n        {` `}\n        <a\n          className=\"underline text-blue-500\"\n          href=\"https://www.gatsbyjs.org/docs/client-only-routes-and-user-authentication/\"\n        >\n          client-only routes section\n        </a>\n        {` `} and {` `}\n        <a\n          className=\"underline text-blue-500\"\n          href=\"https://www.gatsbyjs.org/tutorial/authentication-tutorial\"\n        >\n          making a site with user authentication\n        </a>\n        {` `}\n        tutorial in the official gatsby doc.\n      </p>\n      <br />\n      <p>\n        This is the public home, and here it is a private route to start:\n        <br />\n        <button\n          className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline float-right\"\n          type=\"button\"\n        >\n          <Link to=\"/app/profile\">Go to your profile</Link>\n        </button>\n      </p>\n    </View>\n  </Layout>\n);\n\nexport default Index;\n","exports.FirebaseContext = require(\"./src/components/FirebaseContext\").default\nexports.useFirebase = require(\"./src/components/FirebaseContext\").useFirebase\n"],"sourceRoot":""}