version: 1
applications:
  - appRoot: website
    env:
      variables:
        VERSION: "1.0.0"
        ASSETS_PUBLIC_PATH: $ASSETS_PUBLIC_PATH
        WEBSITE_BASE_URL: $WEBSITE_BASE_URL
        WEBSITE_SIGNIN: $WEBSITE_SIGNIN
        WEBSITE_REDIRECT: $WEBSITE_REDIRECT
    backend:
      phases:
        build:
          commands:
            - amplifyPush --simple
    frontend:
      phases:
        preBuild:
          commands:
            - yarn install
        build:
          commands:
            - yarn run build
      artifacts:
        baseDirectory: public
        files:
          - '**/*'
      cache:
        paths:
          - node_modules/**/*
